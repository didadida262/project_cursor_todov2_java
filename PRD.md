# 待办事项应用产品需求文档 (PRD)

## 1. 项目概述

### 1.1 项目名称
待办事项管理应用 (Todo Application)

### 1.2 项目目标
开发一个功能完整、界面美观的待办事项管理应用，支持任务的增删改查、状态管理、过滤筛选以及多语言切换功能。

### 1.3 项目范围
- 前端：基于 React 的单页面应用
- 后端：基于 Spring Boot 的 RESTful API 服务
- 数据库：MySQL 关系型数据库

---

## 2. 功能需求

### 2.1 核心功能

#### 2.1.1 任务管理
- **添加任务**
  - 用户可以通过输入框输入新任务
  - 点击"添加"按钮创建新任务
  - 添加成功后自动清空输入框
  - 任务标题为必填项

- **查看任务列表**
  - 以列表形式展示所有待办事项
  - 每个任务项显示任务标题
  - 列表项之间保持适当间距

- **标记完成**
  - 每个任务项包含"完成"按钮
  - 点击"完成"按钮后，任务项添加 `completed` CSS 类
  - `completed` 类用于显示删除线效果（划掉文字）
  - 支持切换完成/未完成状态

- **删除任务**
  - 每个任务项包含"删除"按钮
  - 点击"删除"按钮后，该任务从列表中移除

#### 2.1.2 过滤功能
- **查询条件**
  - "全部"：显示所有任务
  - "未完成"：仅显示未完成的任务
  - "已完成"：仅显示已完成的任务

#### 2.1.3 批量操作
- **清除已完成**
  - 底部提供"清除已完成"按钮
  - 点击后删除所有已完成的任务

- **清除全部**
  - 底部提供"清除全部"按钮
  - 点击后删除所有任务（包括已完成和未完成）

#### 2.1.4 多语言支持
- **语言切换**
  - 右上角提供语言选择下拉框
  - 支持中文和英文切换
  - 默认语言：英文
  - 切换语言后，界面所有文本应相应更新

---

## 3. UI/UX 设计要求

### 3.1 布局设计
- **主体布局**
  - 主体内容居中显示
  - 最大宽度：800px
  - 响应式设计，适配不同屏幕尺寸

### 3.2 视觉设计
- **整体风格**
  - 现代、简洁的设计风格
  - 使用清晰的视觉层次

- **输入框样式**
  - 美观的输入框设计
  - 清晰的边框和焦点状态

- **按钮样式**
  - 统一的按钮设计风格
  - 鼠标悬停时提供视觉反馈效果
  - 不同功能按钮使用不同颜色区分（如完成、删除）

- **列表项样式**
  - 列表项之间保持适当间距
  - 鼠标悬停在列表项上时提供视觉反馈效果
  - 已完成任务显示删除线效果

### 3.3 交互反馈
- 所有可交互元素（按钮、列表项）需提供悬停效果
- 操作成功后提供适当的用户反馈
- 错误情况需提供清晰的错误提示

---

## 4. 技术架构

### 4.1 技术栈

#### 前端技术栈
- **框架**：React
- **样式**：CSS（现代、简洁的设计）
- **状态管理**：React Hooks / Context API
- **HTTP 客户端**：Fetch API 或 Axios

#### 后端技术栈
- **框架**：Spring Boot 3.0
- **语言**：Java 17+
- **ORM**：Spring Data JPA
- **数据库驱动**：MySQL Connector
- **工具库**：Lombok
- **API 文档**：Swagger (springdoc-openapi)

#### 数据库
- **数据库类型**：MySQL 5.7+
- **连接地址**：localhost:3306
- **用户名**：root
- **密码**：空（无密码）
- **数据库名**：todoapp

### 4.2 项目结构
```
project_cursor_todov2_java/
├── backend/          # 后端项目目录
│   ├── src/
│   ├── pom.xml       # Maven 依赖配置
│   └── spec-req.md   # API 接口规范文档
├── front/            # 前端项目目录
│   ├── src/
│   ├── public/
│   └── package.json
├── README.md
├── spec-req.md       # API 接口规范文档
├── 需求.txt
└── PRD.md            # 本文档
```

---

## 5. 数据库设计

### 5.1 数据库配置
- **地址**：localhost:3306
- **用户名**：root
- **密码**：空
- **数据库名**：todoapp

### 5.2 数据表设计

#### 5.2.1 todos 表
| 字段名 | 类型 | 约束 | 说明 |
|--------|------|------|------|
| id | BIGINT | PRIMARY KEY, AUTO_INCREMENT | 主键ID |
| title | VARCHAR(255) | NOT NULL | 任务标题 |
| description | TEXT | NULL | 任务描述（可选） |
| completed | BOOLEAN | NOT NULL, DEFAULT FALSE | 完成状态 |
| priority | INT | DEFAULT 0 | 优先级 |
| due_date | DATETIME | NULL | 截止日期（可选） |
| created_at | DATETIME | NOT NULL, DEFAULT CURRENT_TIMESTAMP | 创建时间 |
| updated_at | DATETIME | NOT NULL, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 更新时间 |

### 5.3 数据库初始化
- 需要创建数据库：`todoapp`
- 需要创建数据表：`todos`
- 建议提供 SQL 初始化脚本

---

## 6. API 接口设计

### 6.1 基础信息
- **基础URL**：`http://localhost:8000`
- **API前缀**：`/api/v1`
- **数据格式**：JSON
- **HTTP状态码**：遵循 RESTful 规范

### 6.2 接口列表

#### 6.2.1 获取待办事项列表
- **接口**：`GET /api/v1/todos`
- **查询参数**：
  - `completed` (可选)：boolean - 过滤完成状态
  - `limit` (可选)：integer - 限制返回数量，默认100
  - `offset` (可选)：integer - 偏移量，默认0
- **响应**：返回待办事项列表及总数

#### 6.2.2 创建待办事项
- **接口**：`POST /api/v1/todos`
- **请求体**：包含 title、description（可选）、priority、due_date（可选）
- **响应**：返回创建成功的待办事项对象

#### 6.2.3 更新待办事项
- **接口**：`PUT /api/v1/todos/{todo_id}`
- **路径参数**：todo_id - 待办事项ID
- **请求体**：包含需要更新的字段
- **响应**：返回更新后的待办事项对象

#### 6.2.4 删除待办事项
- **接口**：`DELETE /api/v1/todos/{todo_id}`
- **路径参数**：todo_id - 待办事项ID
- **响应**：返回删除成功消息

#### 6.2.5 切换完成状态
- **接口**：`PATCH /api/v1/todos/{todo_id}/toggle`
- **路径参数**：todo_id - 待办事项ID
- **响应**：返回切换后的状态信息

#### 6.2.6 批量删除已完成项
- **接口**：`DELETE /api/v1/todos/completed`
- **响应**：返回删除成功消息及删除数量

#### 6.2.7 清空所有待办事项
- **接口**：`DELETE /api/v1/todos/all`
- **响应**：返回删除成功消息及删除数量

### 6.3 响应格式

#### 成功响应格式
```json
{
  "code": 200,
  "message": "success",
  "data": { ... },
  "total": 1
}
```

#### 错误响应格式
```json
{
  "code": 404,
  "message": "Todo not found",
  "detail": "Todo with id 999 does not exist"
}
```

### 6.4 跨域处理
- 后端需要配置 CORS，允许前端跨域访问
- 建议允许的源：`http://localhost:3000`（前端开发服务器）

---

## 7. 测试要求

### 7.1 单元测试
- **后端单元测试**
  - Service 层业务逻辑测试
  - Repository 层数据访问测试
  - Controller 层接口测试
  - 使用 JUnit 5 和 Mockito 进行测试

- **前端单元测试**
  - 组件渲染测试
  - 用户交互测试
  - 状态管理测试

### 7.2 集成测试
- API 接口集成测试
- 数据库操作集成测试
- 前后端联调测试

### 7.3 功能测试
- 添加任务功能测试
- 标记完成功能测试
- 删除任务功能测试
- 过滤功能测试
- 批量操作功能测试
- 语言切换功能测试

---

## 8. 开发规范

### 8.1 代码规范
- 遵循各技术栈的官方代码规范
- Java 代码遵循 Google Java Style Guide 或阿里巴巴 Java 开发手册
- React 代码遵循 React 官方最佳实践
- 使用 ESLint 和 Prettier 进行代码格式化

### 8.2 命名规范
- 数据库表名、字段名使用小写字母和下划线
- Java 类名使用大驼峰命名（PascalCase）
- Java 方法名、变量名使用小驼峰命名（camelCase）
- React 组件名使用大驼峰命名（PascalCase）

### 8.3 注释规范
- 关键业务逻辑需要添加注释
- API 接口需要添加 Swagger 注解
- 复杂算法需要添加说明注释

---

## 9. 部署要求

### 9.1 开发环境
- **后端**
  - 运行端口：8000
  - 开发工具：IntelliJ IDEA 或 Eclipse
  - 构建工具：Maven

- **前端**
  - 运行端口：3000（开发服务器）
  - 开发工具：VS Code 或 WebStorm
  - 包管理工具：npm 或 yarn

### 9.2 生产环境
- 前端需要构建为静态文件
- 后端需要打包为 JAR 文件
- 数据库需要配置生产环境连接信息

---

## 10. 验收标准

### 10.1 功能验收
- [ ] 能够成功添加待办事项
- [ ] 能够成功标记任务为完成/未完成
- [ ] 能够成功删除单个任务
- [ ] 能够成功过滤显示全部/未完成/已完成任务
- [ ] 能够成功批量删除已完成任务
- [ ] 能够成功清空所有任务
- [ ] 能够成功切换中英文语言

### 10.2 UI/UX 验收
- [ ] 界面设计现代、简洁
- [ ] 主体内容居中，最大宽度800px
- [ ] 输入框和按钮样式美观
- [ ] 列表项之间有适当间距
- [ ] 鼠标悬停有视觉反馈效果
- [ ] 已完成任务显示删除线效果

### 10.3 技术验收
- [ ] 后端 API 接口符合规范文档要求
- [ ] 数据库表结构设计合理
- [ ] 单元测试覆盖率达标
- [ ] 代码符合规范要求
- [ ] 跨域问题已解决

---

## 11. 项目里程碑

### 11.1 第一阶段：后端开发
- 数据库设计和建表
- Spring Boot 项目搭建
- API 接口开发
- 单元测试编写

### 11.2 第二阶段：前端开发
- React 项目搭建
- UI 组件开发
- 功能实现
- 多语言支持

### 11.3 第三阶段：联调测试
- 前后端联调
- 功能测试
- Bug 修复
- 性能优化

### 11.4 第四阶段：验收交付
- 代码审查
- 文档完善
- 项目交付

---

## 12. 风险与约束

### 12.1 技术风险
- MySQL 数据库连接配置问题
- 前后端跨域问题
- 数据持久化问题

### 12.2 约束条件
- 数据库密码为空，仅用于开发环境
- 项目分为 backend 和 front 两个目录
- 需要参考 spec-req.md 文档中的 API 规范

---



